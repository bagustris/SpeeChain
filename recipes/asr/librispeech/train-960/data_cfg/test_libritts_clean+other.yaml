##############################################################################
# Testing: test-clean and test-other of 16khz-downsampled LibriTTS
# Authors: Heli Qi
# Description: This configuration is used to replace data_cfg in exp_cfg for evaluating ASR models on LibriTTS
# ############################################################################


###################################
# Experiment Parameters and setup #
###################################
# if your dumped dataset is outside the toolkit folder, please change dataset_path. There should be a folder named 'libritts' in dataset_path
dataset_path: datasets/
dataset: libritts

wav_format: wav16000
txt_format: librispeech
token_num: full_tokens



##############################
# Data Loading Configuration #
##############################
data_root: !ref <dataset_path>/<dataset>/data
# Note: there must be a blank between the anchor '*valid_dset' and the colon ':'
test:
    libritts-test-clean:
        type: abs.Iterator
        conf:
            dataset_type: speech_text.SpeechTextDataset
            dataset_conf:
                main_data:
                    feat: !ref <data_root>/<wav_format>/test-clean/idx2wav
                    text: !ref <data_root>/<wav_format>/test-clean/idx2<txt_format>_text

            data_len: !ref <data_root>/<wav_format>/test-clean/idx2wav_len
            shuffle: False
            group_info:
                speaker: !ref <data_root>/<wav_format>/test-clean/idx2spk
                gender: !ref <data_root>/<wav_format>/test-clean/idx2gen

    libritts-test-other:
        type: abs.Iterator
        conf:
            dataset_type: speech_text.SpeechTextDataset
            dataset_conf:
                main_data:
                    feat: !ref <data_root>/<wav_format>/test-other/idx2wav
                    text: !ref <data_root>/<wav_format>/test-other/idx2<txt_format>_text

            data_len: !ref <data_root>/<wav_format>/test-other/idx2wav_len
            shuffle: False
            group_info:
                speaker: !ref <data_root>/<wav_format>/test-other/idx2spk
                gender: !ref <data_root>/<wav_format>/test-other/idx2gen
