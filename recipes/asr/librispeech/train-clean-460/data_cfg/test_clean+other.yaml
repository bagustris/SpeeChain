### Author: Heli Qi
### Affiliation: NAIST
### Date: 2022.09
# This configuration is used to evaluate the final performance on test-clean and test-other
# The testing is better to be done by abs.Iterator (one data instance at each testing step) for the accurate results.
# block.BlockIterator can also be used to perform the batch-level evaluation, but the result is slightly different from the one obtained by abs.Iterator.


### --- Reference Zone --- ###
dataset: librispeech

wav_format: wav
txt_format: librispeech
token_num: full_tokens
data_root: !ref datasets/<dataset>/data/<wav_format>
### ------------------------ ###


test:
    test-clean:
        type: abs.Iterator
        conf:
            dataset_type: speech_text.SpeechTextDataset
            dataset_conf:
                main_data:
                    feat: !ref <data_root>/test-clean/idx2wav
                    text: !ref <data_root>/test-clean/idx2<txt_format>_text

            data_len: !ref <data_root>/test-clean/idx2wav_len
            shuffle: False
            group_info:
                speaker: !ref <data_root>/test-clean/idx2spk
                gender: !ref <data_root>/test-clean/idx2gen

    test-other:
        type: abs.Iterator
        conf:
            dataset_type: speech_text.SpeechTextDataset
            dataset_conf:
                main_data:
                    feat: !ref <data_root>/test-other/idx2wav
                    text: !ref <data_root>/test-other/idx2<txt_format>_text

            data_len: !ref <data_root>/test-other/idx2wav_len
            shuffle: False
            group_info:
                speaker: !ref <data_root>/test-other/idx2spk
                gender: !ref <data_root>/test-other/idx2gen
